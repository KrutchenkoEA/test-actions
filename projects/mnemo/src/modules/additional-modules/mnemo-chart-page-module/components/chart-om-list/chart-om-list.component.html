<div
  *transloco="let t; read: 'mnemo.ChartPageSelectorComponent'"
  [ngClass]="'predictors-list_' + mnemoChartPageDataService.currentDirection"
  class="predictors-list"
>
  @for (item of mnemoChartPageDataService.activeOmAttrMap | keyvalue; track item.key; let i = $index) {
    <div
      (click)="selectPredictor(item.value)"
      [class.line-loader]="mnemoChartWrapService.chartWrapLoading$ | async"
      [class.predictor_active]="item.value.isActive"
      [class.predictor_disabled]="item.value.attrType === 1 || item.value.attrType === 4 || item.value.attrType === 5"
      class="predictor"
      matRipple
      matRippleColor="var(--color-logo-50)"
      tluiDirDirective
    >
      <div class="predictor__title">
        <div [ngStyle]="{ backgroundColor: getPredictorColor(item.key) }" class="marker"></div>
        <span matTooltip="{{ item.value.attrGuid }}">{{ item.value.name }}</span>
      </div>

      <div
        (click)="catchEvent($event)"
        [class.predictor__info_warning]="
          item.value.attrType === 1 || item.value.attrType === 4 || item.value.attrType === 5
        "
        class="predictor__info"
      >
        <svg-icon (click)="catchEvent($event)" [matTooltip]="getAttrType(item.value.attrType)" src="tluiIconInfoCircle">
        </svg-icon>
      </div>

      <div class="predictor__setting">
        <button
          (click)="openSettingPopup($event, item.value)"
          [disabled]="checkSetting(item.value.attrGuid)"
          btnStyle="tertiary"
          class="predictor__button"
          matTooltip="{{ t('advancedSettings') }}"
          size="sm"
          tluiButton
        >
          <svg-icon class="tlui-icon--sm" src="tluiIconSets"></svg-icon>
          @if (isSeparateLayer(item.value.attrGuid)) {
            <div (click)="catchEvent($event)" class="predictor__info predictor__info_good predictor__info_blink">
              <svg-icon
                (click)="catchEvent($event)"
                matTooltip="{{ 'mnemo.ChartSettingComponent.separateLayer' | transloco }}"
                src="tluiIconChartMountainCorner"
              >
              </svg-icon>
            </div>
          }
          @if (isEmptyData(item.value.attrGuid)) {
            <div (click)="catchEvent($event)" class="predictor__info predictor__info_error predictor__info_blink">
              <svg-icon (click)="catchEvent($event)" [matTooltip]="t('emptyText')" src="tluiIconAlertAlarm"></svg-icon>
            </div>
          }
          @if (isChanged(item.value.attrGuid)) {
            <svg-icon class="predictor__info predictor__info_warning" src="tluiIconEditPen"></svg-icon>
          }
        </button>
      </div>
    </div>
  }
</div>
